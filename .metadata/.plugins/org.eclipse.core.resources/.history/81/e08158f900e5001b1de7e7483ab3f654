package com.all.signup;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

import com.all.member.MemberVO;
import com.all.utill.ConnectionDB;

public class SignupDAO {
	private StringBuilder sql = new StringBuilder();
	
	//중복 체크
	public boolean idCheck(MemberVO memVo) throws Exception {
		sql.append("SELECT 1");
		sql.append("  FROM MEMBER");
		sql.append(" WHERE MEM_ID = ?");
		
		
		ConnectionDB instance = ConnectionDB.getInstance();
		Connection conn = instance.getConnection();
		
		PreparedStatement ps = conn.prepareStatement(sql.toString());
		ps.setString(1, memVo.getId());
		ResultSet rs = ps.executeQuery();
		
		if(rs.next()) {
			return true;
		}
		return false;
	}
	
	//가입 여부 체크
	public boolean signUpCheck(MemberVO memVo) throws Exception {
		sql.append("SELECT 1");
		sql.append("  FROM MEMBER");
		sql.append(" WHERE MEM_NM = ?");
		sql.append("   AND MEM_REGNO = ?");
		
		ConnectionDB instance = ConnectionDB.getInstance();
		Connection conn = instance.getConnection();
		
		PreparedStatement ps = conn.prepareStatement(sql.toString());
		ps.setString(1, memVo.getName());
		ps.setString(2, memVo.getRegno());
		ResultSet rs = ps.executeQuery();
		
		if(rs.next()) {
			return true;
		}
		return false;
	}
	
	//15세 확인
	public boolean ageCheck(String regNo) {
		DateFormat dateFormat = new SimpleDateFormat("yyyy");
		Date date = new Date();
		int curruntYear = Integer.parseInt(dateFormat.format(date));
		int regNoInt = Integer.parseInt(regNo) / 10000;
		System.out.println(curruntYear);
		System.out.println(regNoInt);
		
		
		return false;
	}
}





































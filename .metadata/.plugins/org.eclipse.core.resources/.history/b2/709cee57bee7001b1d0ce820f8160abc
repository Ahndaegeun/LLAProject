package controller;

import java.util.List;
import java.util.Random;

import dao.CharacterDAO;
import dao.MonstersDAO;
import vo.CharacterVO;
import vo.MonstersVO;

public class HunttingController {
	private HunttingController() {}
	private static HunttingController instance;
	public static HunttingController getHunttingController() {
		if(instance == null) {
			instance = new HunttingController();
		}
		return instance;
	}
	
	private Random rnd = new Random();
	private MonstersDAO monDao = MonstersDAO.getMonsterDAO();
	private CharacterDAO charDao = CharacterDAO.getCharacterDAO();
	
	public MonstersVO getMonster(CharacterVO vo) throws Exception {
		List<MonstersVO> list = monDao.showMonsterList();
		MonstersVO monster = null;
		
		while(true) {
			int index = rnd.nextInt(11);
			if(list.get(index).getMomLev() <= vo.getCharLevel()) {
				monster = list.get(index);
				break;
			}
		}
		
		
		return monster;
	}
	
	public boolean run() {
		return charDao.run();
	}
	
	public MonstersVO characterBasicAtt(List<Object> fignters) throws Exception {
		CharacterVO user = (CharacterVO)fignters.get(0);
		MonstersVO monster = (MonstersVO)fignters.get(1);
		
		double userAtt = charDao.basicAtt(user);
		monster = monDao.defMonster(monster, userAtt);
		
		double monAtt = monDao.attMonster(monster);
		charDao.beingAtt(user, monAtt);
		
		return monster;
	}
}














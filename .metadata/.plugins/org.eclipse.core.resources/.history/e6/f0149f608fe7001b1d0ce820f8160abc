package controller;

import java.util.List;

import dao.CharacterDAO;
import dao.InventoryDAO;
import vo.CharacterVO;
import vo.InventoryVO;

public class GameController {
	private GameController () {}
	private static GameController instance;
	public static GameController getController() {
		if(instance == null) {
			instance = new GameController();
		}
		return instance;
	}
	
	public CharacterVO getCharacterInfo(CharacterVO vo) throws Exception {
		CharacterDAO dao = CharacterDAO.getCharacterDAO();
		return dao.showCharacterInfo(vo);
	}
	
	public List<InventoryVO> showInventory(CharacterVO vo) throws Exception {
		InventoryDAO invenDao = InventoryDAO.getInvetoryDAO();
		List<InventoryVO> list = invenDao.showInventory(new InventoryVO(null, vo.getCharIdx(), 0));
		return list;
	}
	
	public boolean useItem() {
		
	}
	
	public boolean mountingWeapon(CharacterVO vo) throws Exception {
		
		
		return false;
	}
	
	public boolean unEquippingWeapon(CharacterVO vo) throws Exception {
		InventoryDAO inveDao = InventoryDAO.getInvetoryDAO();
		CharacterDAO charDao = CharacterDAO.getCharacterDAO();
		boolean insertItem = inveDao.insertItem(new InventoryVO(vo.getCharWeapon(), vo.getCharIdx(), 1));
		boolean unEquip = charDao.unEquippingWeapon(vo);

		if(insertItem && unEquip) {
			return true;
		}
		return false;
	}
	
	public boolean unEquippingArmor(CharacterVO vo) throws Exception {
		InventoryDAO inveDao = InventoryDAO.getInvetoryDAO();
		CharacterDAO charDao = CharacterDAO.getCharacterDAO();
		boolean insertItem = inveDao.insertItem(new InventoryVO(vo.getCharArmor(), vo.getCharIdx(), 1));
		boolean unEquip = charDao.unEquippingArmor(vo);
		
		if(insertItem && unEquip) {
			return true;
		}
		return false;
	}
	
	
}
